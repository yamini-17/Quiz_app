<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - Quiz Master</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/dashboard" class="navbar-brand">ğŸ¯ Quiz Master</a>
            <ul class="navbar-menu">
                <li><a href="/dashboard" class="navbar-link">ğŸ“Š Dashboard</a></li>
                <li><a href="/leaderboard" class="navbar-link">ğŸ† Leaderboard</a></li>
            </ul>
            <div class="navbar-user">
                <span class="user-name" id="userName">Loading...</span>
                <button class="btn btn-danger" id="logoutBtn">Sign Out</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h1 style="color: white; font-size: 3rem; font-weight: 900; margin-bottom: 0.5rem;">
                Welcome Back, <span id="userNameTitle">Learner</span>! ğŸ‘‹
            </h1>
            <p style="color: rgba(255,255,255,0.9); font-size: 1.25rem; font-weight: 500;">
                Ready to challenge yourself today?
            </p>
        </div>
        
        <!-- Available Quizzes -->
        <div class="card">
            <div class="card-header">ğŸ“š Explore Available Quizzes</div>
            <p style="color: var(--text-secondary); margin-bottom: 2rem; font-size: 1.125rem;">
                Choose from our collection of engaging quizzes across various topics. Click on any quiz to start your challenge!
            </p>
            <div class="grid grid-2" id="quizzesContainer">
                <div class="spinner"></div>
            </div>
        </div>

        <!-- Recent Attempts -->
        <div class="card">
            <div class="card-header">ğŸ“Š Your Recent Performance</div>
            <p style="color: var(--text-secondary); margin-bottom: 2rem; font-size: 1.125rem;">
                Track your progress and see how you've been performing in recent quizzes.
            </p>
            <div id="attemptsContainer">
                <div class="spinner"></div>
            </div>
        </div>

        <!-- Motivational Section -->
        <div class="card" style="background: linear-gradient(135deg, #f0f4ff, #e0e7ff); border-left: 5px solid var(--primary-color);">
            <h3 style="font-size: 1.5rem; font-weight: 800; margin-bottom: 1rem; color: var(--primary-color);">
                ğŸ’¡ Pro Tip
            </h3>
            <p style="color: var(--text-primary); font-size: 1.125rem; line-height: 1.6;">
                Take regular quizzes to strengthen your knowledge retention. Studies show that active recall through quizzing is one of the most effective learning techniques!
            </p>
        </div>
    </div>

    <script src="/static/js/quiz.js"></script>
    <script>
        // Load user info
        fetch('/api/auth/me')
            .then(res => res.json())
            .then(data => {
                if (data.user) {
                    document.getElementById('userName').textContent = data.user.username;
                    document.getElementById('userNameTitle').textContent = data.user.username;
                    if (data.user.role === 'admin') {
                        const adminLink = document.createElement('li');
                        adminLink.innerHTML = '<a href="/admin/dashboard" class="navbar-link">âš™ï¸ Admin Panel</a>';
                        document.querySelector('.navbar-menu').appendChild(adminLink);
                    }
                } else {
                    window.location.href = '/login';
                }
            })
            .catch(() => {
                window.location.href = '/login';
            });

        // Logout
        document.getElementById('logoutBtn').addEventListener('click', () => {
            if (confirm('Are you sure you want to sign out?')) {
                fetch('/api/auth/logout', { method: 'POST' })
                    .then(() => window.location.href = '/login');
            }
        });

        // Load quizzes
        loadQuizzes();
        
        // Load attempts
        loadAttempts();
    </script>
</body>
</html>